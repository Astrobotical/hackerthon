"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PinTooltipContent = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const utils_1 = require("../../lib/utils");
const format_time_1 = require("../../lib/format-time");
const ui_1 = require("../../ui");
const react_fontawesome_1 = require("@fortawesome/react-fontawesome");
const free_solid_svg_icons_1 = require("@fortawesome/free-solid-svg-icons");
const PinTooltipContent = ({ displayName, typeLabel: type, description, history, className, isLoading = false, onInspect, isExpanded = false, onToggleExpand, }) => {
    const indication = (0, jsx_runtime_1.jsx)(ui_1.HotkeyIndication, { hotkey: "cmd+i", label: "View all", className: "text-neutral-700 opacity-80 dark:text-white" });
    const renderHistoryContent = () => {
        var _a, _b;
        if (isLoading) {
            return ((0, jsx_runtime_1.jsxs)("div", { className: "flex flex-col", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-center py-2", children: [(0, jsx_runtime_1.jsx)("span", { children: "Last value:" }), (0, jsx_runtime_1.jsx)("span", { children: "Type: -" })] }), (0, jsx_runtime_1.jsx)("div", { className: "bg-[#1e1e1e] p-2 border border-neutral-700 rounded", children: (0, jsx_runtime_1.jsx)("div", { className: "min-h-[60px] flex items-center justify-center", children: (0, jsx_runtime_1.jsx)("div", { className: "text-sm text-neutral-400 animate-pulse", children: "Loading data..." }) }) }), (0, jsx_runtime_1.jsxs)("div", { className: "p-2 text-xs flex flex-row justify-between items-center font-semibold", children: [(0, jsx_runtime_1.jsx)("span", { className: "font-semibold", children: "Last: -" }), (0, jsx_runtime_1.jsx)("span", { className: "font-semibold", children: "Total: -" }), (0, jsx_runtime_1.jsx)("div", { className: "cursor-default opacity-50", title: "Loading data...", children: indication })] })] }));
        }
        if (!history) {
            return ((0, jsx_runtime_1.jsxs)("div", { className: "flex flex-col", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-center py-2", children: [(0, jsx_runtime_1.jsx)("span", { children: "Last value:" }), (0, jsx_runtime_1.jsx)("span", { children: "Type: -" })] }), (0, jsx_runtime_1.jsx)("div", { className: "bg-[#1e1e1e] p-2 border border-neutral-700 rounded", children: (0, jsx_runtime_1.jsx)("div", { className: "min-h-[60px] flex items-center justify-center", children: (0, jsx_runtime_1.jsx)("div", { className: "text-sm text-neutral-400", children: "No session data available" }) }) }), (0, jsx_runtime_1.jsxs)("div", { className: "p-2 text-xs flex flex-row justify-between items-center font-semibold", children: [(0, jsx_runtime_1.jsx)("span", { className: "font-semibold", children: "Last: -" }), (0, jsx_runtime_1.jsx)("span", { className: "font-semibold", children: "Total: -" }), (0, jsx_runtime_1.jsx)("div", { className: "cursor-default opacity-50", title: "No data to inspect", children: indication })] })] }));
        }
        const { lastSamples } = history;
        if (lastSamples.length === 0) {
            return ((0, jsx_runtime_1.jsxs)("div", { className: "flex flex-col", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-center py-2", children: [(0, jsx_runtime_1.jsx)("span", { children: "Last value:" }), (0, jsx_runtime_1.jsx)("span", { children: "Type: -" })] }), (0, jsx_runtime_1.jsx)("div", { className: "bg-[#1e1e1e] p-2 border border-neutral-700 rounded", children: (0, jsx_runtime_1.jsx)("div", { className: "min-h-[60px] flex items-center justify-center", children: (0, jsx_runtime_1.jsx)("div", { className: "text-sm text-neutral-400", children: "No values received" }) }) }), (0, jsx_runtime_1.jsxs)("div", { className: "p-2 text-xs flex flex-row justify-between items-center font-semibold", children: [(0, jsx_runtime_1.jsx)("span", { className: "font-semibold", children: "Last: -" }), (0, jsx_runtime_1.jsx)("span", { className: "font-semibold", children: "Total: 0" }), (0, jsx_runtime_1.jsx)("div", { className: "cursor-default opacity-50", title: "No data to inspect", children: indication })] })] }));
        }
        const lastValue = (_a = lastSamples[0]) === null || _a === void 0 ? void 0 : _a.val;
        const lastTime = (_b = lastSamples[0]) === null || _b === void 0 ? void 0 : _b.time;
        const valueType = typeof lastValue === "object" ? "object" : typeof lastValue;
        const formattedValue = typeof lastValue === "object"
            ? JSON.stringify(lastValue, null, 2)
            : String(lastValue);
        return ((0, jsx_runtime_1.jsxs)("div", { className: "flex flex-col", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-center py-2", children: [(0, jsx_runtime_1.jsx)("span", { children: "Last value:" }), (0, jsx_runtime_1.jsxs)("span", { children: ["Type: ", valueType] })] }), (0, jsx_runtime_1.jsx)("div", { className: "bg-[#1e1e1e] p-2 border border-neutral-700 rounded", children: (0, jsx_runtime_1.jsx)("pre", { className: (0, utils_1.cn)("m-0 whitespace-pre-wrap break-words font-mono text-xs overflow-auto min-h-[60px]", isExpanded ? "max-h-[300px]" : "max-h-[60px]"), children: formattedValue }) }), (0, jsx_runtime_1.jsxs)("div", { className: "p-2 text-xs flex flex-row justify-between items-center font-semibold", children: [(0, jsx_runtime_1.jsxs)("span", { className: "font-semibold", children: ["Last: ", (0, format_time_1.formatTimeAgo)(lastTime !== null && lastTime !== void 0 ? lastTime : 0)] }), (0, jsx_runtime_1.jsxs)("span", { className: "font-semibold", children: ["Total: ", lastSamples.length] }), (0, jsx_runtime_1.jsx)("div", { onClick: onInspect, className: "cursor-pointer hover:opacity-80", title: "Inspect all values", children: indication })] })] }));
    };
    return ((0, jsx_runtime_1.jsxs)("div", { className: (0, utils_1.cn)("w-[300px] overflow-hidden rounded-md p-0 bg-gradient-to-b from-black to-[#222] text-white border border-neutral-700", className), children: [(0, jsx_runtime_1.jsxs)("div", { className: "bg-[#383838] border-b border-neutral-700 py-[2px] px-2 rounded-t-md flex justify-between items-center", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("strong", { className: "mr-1.5 text-sm font-bold", children: displayName }), " ", (0, jsx_runtime_1.jsx)("span", { className: "text-[10px] capitalize", children: type })] }), onToggleExpand && ((0, jsx_runtime_1.jsx)("button", { onClick: onToggleExpand, className: "text-xs text-neutral-400 hover:text-white p-1 rounded", title: isExpanded ? "Collapse" : "Expand", children: (0, jsx_runtime_1.jsx)(react_fontawesome_1.FontAwesomeIcon, { icon: isExpanded ? free_solid_svg_icons_1.faChevronUp : free_solid_svg_icons_1.faChevronDown }) }))] }), (0, jsx_runtime_1.jsxs)("div", { className: "py-1 px-2 rounded-b-md", children: [description && ((0, jsx_runtime_1.jsx)("div", { className: "py-2 text-neutral-400 border-b border-neutral-700", children: description })), renderHistoryContent()] })] }));
};
exports.PinTooltipContent = PinTooltipContent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGluVG9vbHRpcENvbnRlbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvdmlzdWFsLW5vZGUtZWRpdG9yL3Bpbi12aWV3L1BpblRvb2x0aXBDb250ZW50LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBRUEsMkNBQXFDO0FBQ3JDLHVEQUFzRDtBQUN0RCxpQ0FBNEM7QUFDNUMsc0VBQWlFO0FBQ2pFLDRFQUEwRjtBQWVuRixNQUFNLGlCQUFpQixHQUFHLENBQUMsRUFDaEMsV0FBVyxFQUNYLFNBQVMsRUFBRSxJQUFJLEVBQ2YsV0FBVyxFQUNYLE9BQU8sRUFDUCxTQUFTLEVBQ1QsU0FBUyxHQUFHLEtBQUssRUFDakIsU0FBUyxFQUNULFVBQVUsR0FBRyxLQUFLLEVBQ2xCLGNBQWMsR0FDUyxFQUFFLEVBQUU7SUFFM0IsTUFBTSxVQUFVLEdBQUcsdUJBQUMscUJBQWdCLElBQ2xDLE1BQU0sRUFBQyxPQUFPLEVBQ2QsS0FBSyxFQUFDLFVBQVUsRUFDaEIsU0FBUyxFQUFDLDZDQUE2QyxHQUN2RCxDQUFBO0lBQ0YsTUFBTSxvQkFBb0IsR0FBRyxHQUFHLEVBQUU7O1FBQ2hDLElBQUksU0FBUyxFQUFFLENBQUM7WUFDZCxPQUFPLENBQ0wsaUNBQUssU0FBUyxFQUFDLGVBQWUsYUFDNUIsaUNBQUssU0FBUyxFQUFDLHdDQUF3QyxhQUNyRCwyREFBd0IsRUFDeEIsdURBQW9CLElBQ2hCLEVBQ04sZ0NBQUssU0FBUyxFQUFDLG9EQUFvRCxZQUNqRSxnQ0FBSyxTQUFTLEVBQUMsK0NBQStDLFlBQzVELGdDQUFLLFNBQVMsRUFBQyx3Q0FBd0MsZ0NBQXNCLEdBQ3pFLEdBQ0YsRUFDTixpQ0FBSyxTQUFTLEVBQUMsc0VBQXNFLGFBQ25GLGlDQUFNLFNBQVMsRUFBQyxlQUFlLHdCQUFlLEVBQzlDLGlDQUFNLFNBQVMsRUFBQyxlQUFlLHlCQUFnQixFQUMvQyxnQ0FDRSxTQUFTLEVBQUMsMkJBQTJCLEVBQ3JDLEtBQUssRUFB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