import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { cn } from "../../lib/utils";
import { formatTimeAgo } from "../../lib/format-time";
import { HotkeyIndication } from "../../ui";
import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
import { faChevronDown, faChevronUp } from "@fortawesome/free-solid-svg-icons";
export const PinTooltipContent = ({ displayName, typeLabel: type, description, history, className, isLoading = false, onInspect, isExpanded = false, onToggleExpand, }) => {
    const indication = _jsx(HotkeyIndication, { hotkey: "cmd+i", label: "View all", className: "text-neutral-700 opacity-80 dark:text-white" });
    const renderHistoryContent = () => {
        var _a, _b;
        if (isLoading) {
            return (_jsxs("div", { className: "flex flex-col", children: [_jsxs("div", { className: "flex justify-between items-center py-2", children: [_jsx("span", { children: "Last value:" }), _jsx("span", { children: "Type: -" })] }), _jsx("div", { className: "bg-[#1e1e1e] p-2 border border-neutral-700 rounded", children: _jsx("div", { className: "min-h-[60px] flex items-center justify-center", children: _jsx("div", { className: "text-sm text-neutral-400 animate-pulse", children: "Loading data..." }) }) }), _jsxs("div", { className: "p-2 text-xs flex flex-row justify-between items-center font-semibold", children: [_jsx("span", { className: "font-semibold", children: "Last: -" }), _jsx("span", { className: "font-semibold", children: "Total: -" }), _jsx("div", { className: "cursor-default opacity-50", title: "Loading data...", children: indication })] })] }));
        }
        if (!history) {
            return (_jsxs("div", { className: "flex flex-col", children: [_jsxs("div", { className: "flex justify-between items-center py-2", children: [_jsx("span", { children: "Last value:" }), _jsx("span", { children: "Type: -" })] }), _jsx("div", { className: "bg-[#1e1e1e] p-2 border border-neutral-700 rounded", children: _jsx("div", { className: "min-h-[60px] flex items-center justify-center", children: _jsx("div", { className: "text-sm text-neutral-400", children: "No session data available" }) }) }), _jsxs("div", { className: "p-2 text-xs flex flex-row justify-between items-center font-semibold", children: [_jsx("span", { className: "font-semibold", children: "Last: -" }), _jsx("span", { className: "font-semibold", children: "Total: -" }), _jsx("div", { className: "cursor-default opacity-50", title: "No data to inspect", children: indication })] })] }));
        }
        const { lastSamples } = history;
        if (lastSamples.length === 0) {
            return (_jsxs("div", { className: "flex flex-col", children: [_jsxs("div", { className: "flex justify-between items-center py-2", children: [_jsx("span", { children: "Last value:" }), _jsx("span", { children: "Type: -" })] }), _jsx("div", { className: "bg-[#1e1e1e] p-2 border border-neutral-700 rounded", children: _jsx("div", { className: "min-h-[60px] flex items-center justify-center", children: _jsx("div", { className: "text-sm text-neutral-400", children: "No values received" }) }) }), _jsxs("div", { className: "p-2 text-xs flex flex-row justify-between items-center font-semibold", children: [_jsx("span", { className: "font-semibold", children: "Last: -" }), _jsx("span", { className: "font-semibold", children: "Total: 0" }), _jsx("div", { className: "cursor-default opacity-50", title: "No data to inspect", children: indication })] })] }));
        }
        const lastValue = (_a = lastSamples[0]) === null || _a === void 0 ? void 0 : _a.val;
        const lastTime = (_b = lastSamples[0]) === null || _b === void 0 ? void 0 : _b.time;
        const valueType = typeof lastValue === "object" ? "object" : typeof lastValue;
        const formattedValue = typeof lastValue === "object"
            ? JSON.stringify(lastValue, null, 2)
            : String(lastValue);
        return (_jsxs("div", { className: "flex flex-col", children: [_jsxs("div", { className: "flex justify-between items-center py-2", children: [_jsx("span", { children: "Last value:" }), _jsxs("span", { children: ["Type: ", valueType] })] }), _jsx("div", { className: "bg-[#1e1e1e] p-2 border border-neutral-700 rounded", children: _jsx("pre", { className: cn("m-0 whitespace-pre-wrap break-words font-mono text-xs overflow-auto min-h-[60px]", isExpanded ? "max-h-[300px]" : "max-h-[60px]"), children: formattedValue }) }), _jsxs("div", { className: "p-2 text-xs flex flex-row justify-between items-center font-semibold", children: [_jsxs("span", { className: "font-semibold", children: ["Last: ", formatTimeAgo(lastTime !== null && lastTime !== void 0 ? lastTime : 0)] }), _jsxs("span", { className: "font-semibold", children: ["Total: ", lastSamples.length] }), _jsx("div", { onClick: onInspect, className: "cursor-pointer hover:opacity-80", title: "Inspect all values", children: indication })] })] }));
    };
    return (_jsxs("div", { className: cn("w-[300px] overflow-hidden rounded-md p-0 bg-gradient-to-b from-black to-[#222] text-white border border-neutral-700", className), children: [_jsxs("div", { className: "bg-[#383838] border-b border-neutral-700 py-[2px] px-2 rounded-t-md flex justify-between items-center", children: [_jsxs("div", { children: [_jsx("strong", { className: "mr-1.5 text-sm font-bold", children: displayName }), " ", _jsx("span", { className: "text-[10px] capitalize", children: type })] }), onToggleExpand && (_jsx("button", { onClick: onToggleExpand, className: "text-xs text-neutral-400 hover:text-white p-1 rounded", title: isExpanded ? "Collapse" : "Expand", children: _jsx(FontAwesomeIcon, { icon: isExpanded ? faChevronUp : faChevronDown }) }))] }), _jsxs("div", { className: "py-1 px-2 rounded-b-md", children: [description && (_jsx("div", { className: "py-2 text-neutral-400 border-b border-neutral-700", children: description })), renderHistoryContent()] })] }));
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGluVG9vbHRpcENvbnRlbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvdmlzdWFsLW5vZGUtZWRpdG9yL3Bpbi12aWV3L1BpblRvb2x0aXBDb250ZW50LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBRUEsT0FBTyxFQUFFLEVBQUUsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3JDLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFDNUMsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ2pFLE9BQU8sRUFBRSxhQUFhLEVBQUUsV0FBVyxFQUFhLE1BQU0sbUNBQW1DLENBQUM7QUFlMUYsTUFBTSxDQUFDLE1BQU0saUJBQWlCLEdBQUcsQ0FBQyxFQUNoQyxXQUFXLEVBQ1gsU0FBUyxFQUFFLElBQUksRUFDZixXQUFXLEVBQ1gsT0FBTyxFQUNQLFNBQVMsRUFDVCxTQUFTLEdBQUcsS0FBSyxFQUNqQixTQUFTLEVBQ1QsVUFBVSxHQUFHLEtBQUssRUFDbEIsY0FBYyxHQUNTLEVBQUUsRUFBRTtJQUUzQixNQUFNLFVBQVUsR0FBRyxLQUFDLGdCQUFnQixJQUNsQyxNQUFNLEVBQUMsT0FBTyxFQUNkLEtBQUssRUFBQyxVQUFVLEVBQ2hCLFNBQVMsRUFBQyw2Q0FBNkMsR0FDdkQsQ0FBQTtJQUNGLE1BQU0sb0JBQW9CLEdBQUcsR0FBRyxFQUFFOztRQUNoQyxJQUFJLFNBQVMsRUFBRSxDQUFDO1lBQ2QsT0FBTyxDQUNMLGVBQUssU0FBUyxFQUFDLGVBQWUsYUFDNUIsZUFBSyxTQUFTLEVBQUMsd0NBQXdDLGFBQ3JELHlDQUF3QixFQUN4QixxQ0FBb0IsSUFDaEIsRUFDTixjQUFLLFNBQVMsRUFBQyxvREFBb0QsWUFDakUsY0FBSyxTQUFTLEVBQUMsK0NBQStDLFlBQzVELGNBQUssU0FBUyxFQUFDLHdDQUF3QyxnQ0FBc0IsR0FDekUsR0FDRixFQUNOLGVBQUssU0FBUyxFQUFDLHNFQUFzRSxhQUNuRixlQUFNLFNBQVMsRUFBQyxlQUFlLHdCQUFlLEVBQzlDLGVBQU0sU0FBUyxFQUFDLGVBQWUseUJBQWdCLEVBQy9DLGNBQ0UsU0FBUyxFQUFDLDJCQUEyQixFQUNyQyxLQUFLLEVBQUMsaUJBQWlCLFlBRXRCLFVBQVUsR0FDUCxJQUNGLElBQ0YsQ0FDUCxDQUFDO1FBQ0osQ0FBQztRQUVELElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUNiLE9BQU8sQ0FDTCxlQUFLLFNBQVMsRUFBQyxlQUFlLGFBQzVCLGVBQUssU0FBUyxFQUFDLHdDQUF3QyxhQUNyRCx5Q0FBd0IsRUFDeEIscUNBQW9CLElBQ2hCLEVBQ04sY0FBSyxTQUFTLEVBQUMsb0RBQW9ELFlBQ2pFLGNBQUssU0FBUyxFQUFDLCtDQUErQyxZQUM1RCxjQUFLLFNBQVMsRUFBQywwQkFBMEIsMENBQWdDLEdBQ3JFLEdBQ0YsRUFDTixlQUFLLFNBQVMsRUFBQyxzRUFBc0UsYUFDbkYsZUFBTSxTQUFTLEVBQUMsZUFBZSx3QkFBZSxFQUM5QyxlQUFNLFNBQVMsRUFBQyxlQUFlLHlCQUFnQixFQUMvQyxjQUNFLFNBQVMsRUFBQywyQkFBMkIsRUFDckMsS0FBSyxFQUFDLG9CQUFvQixZQUV6QixVQUFVLEdBQ1AsSUFDRixJQUNGLENBQ1AsQ0FBQztRQUNKLENBQUM7UUFFRCxNQUFNLEVBQUUsV0FBVyxFQUFFLEdBQUcsT0FBTyxDQUFDO1FBRWhDLElBQUksV0FBVyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUUsQ0FBQztZQUM3QixPQUFPLENBQ0wsZUFBSyxTQUFTLEVBQUMsZUFBZSxhQUM1QixlQUFLLFNBQVMsRUFBQyx3Q0FBd0MsYUFDckQseUNBQXdCLEVBQ3hCLHFDQUFvQixJQUNoQixFQUNOLGNBQUssU0FBUyxFQUFDLG9EQUFvRCxZQUNqRSxjQUFLLFNBQVMsRUFBQywrQ0FBK0MsWUFDNUQsY0FBSyxTQUFTLEVBQUMsMEJBQTBCLG1DQUF5QixHQUM5RCxHQUNGLEVBQ04sZUFBSyxTQUFTLEVBQUMsc0VBQXNFLGFBQ25GLGVBQU0sU0FBUyxFQUFDLGVBQWUsd0JBQWUsRUFDOUMsZUFBTSxTQUFTLEVBQUMsZUFBZSx5QkFBZ0IsRUFDL0MsY0FDRSxTQUFTLEVBQUMsMkJBQTJCLEVBQ3JDLEtBQUssRUFBQyxvQkFBb0IsWUFFekIsVUFBVSxHQUNQLElBQ0YsSUFDRixDQUNQLENBQUM7UUFDSixDQUFDO1FBRUQsTUFBTSxTQUFTLEdBQUcsTUFBQSxXQUFXLENBQUMsQ0FBQyxDQUFDLDBDQUFFLEdBQUcsQ0FBQztRQUN0QyxNQUFNLFFBQVEsR0FBRyxNQUFBLFdBQVcsQ0FBQyxDQUFDLENBQUMsMENBQUUsSUFBSSxDQUFDO1FBQ3RDLE1BQU0sU0FBUyxHQUNiLE9BQU8sU0FBUyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxPQUFPLFNBQVMsQ0FBQztRQUM5RCxNQUFNLGNBQWMsR0FDbEIsT0FBTyxTQUFTLEtBQUssUUFBUTtZQUMzQixDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztZQUNwQyxDQUFDLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBRXhCLE9BQU8sQ0FDTCxlQUFLLFNBQVMsRUFBQyxlQUFlLGFBQzVCLGVBQUssU0FBUyxFQUFDLHdDQUF3QyxhQUNyRCx5Q0FBd0IsRUFDeEIscUNBQWEsU0FBUyxJQUFRLElBQzFCLEVBQ04sY0FBSyxTQUFTLEVBQUMsb0RBQW9ELFlBQ2pFLGNBQUssU0FBUyxFQUFFLEVBQUUsQ0FDaEIsa0ZBQWtGLEVBQ2xGLFVBQVUsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQzlDLFlBQ0UsY0FBYyxHQUNYLEdBQ0YsRUFDTixlQUFLLFNBQVMsRUFBQyxzRUFBc0UsYUFDbkYsZ0JBQU0sU0FBUyxFQUFDLGVBQWUsdUJBQVEsYUFBYSxDQUFDLFFBQVEsYUFBUixRQUFRLGNBQVIsUUFBUSxHQUFJLENBQUMsQ0FBQyxJQUFRLEVBQzNFLGdCQUFNLFNBQVMsRUFBQyxlQUFlLHdCQUFTLFdBQVcsQ0FBQyxNQUFNLElBQVEsRUFDbEUsY0FDRSxPQUFPLEVBQUUsU0FBUyxFQUNsQixTQUFTLEVBQUMsaUNBQWlDLEVBQzNDLEtBQUssRUFBQyxvQkFBb0IsWUFFekIsVUFBVSxHQUNQLElBQ0YsSUFDRixDQUNQLENBQUM7SUFDSixDQUFDLENBQUM7SUFFRixPQUFPLENBQ0wsZUFDRSxTQUFTLEVBQUUsRUFBRSxDQUNYLHFIQUFxSCxFQUNySCxTQUFTLENBQ1YsYUFFRCxlQUFLLFNBQVMsRUFBQyx1R0FBdUcsYUFDcEgsMEJBQ0UsaUJBQVEsU0FBUyxFQUFDLDBCQUEwQixZQUFFLFdBQVcsR0FBVSxFQUFDLEdBQUcsRUFDdkUsZUFBTSxTQUFTLEVBQUMsd0JBQXdCLFlBQUUsSUFBSSxHQUFRLElBQ2xELEVBQ0wsY0FBYyxJQUFJLENBQ2pCLGlCQUNFLE9BQU8sRUFBRSxjQUFjLEVBQ3ZCLFNBQVMsRUFBQyx1REFBdUQsRUFDakUsS0FBSyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxRQUFRLFlBRXpDLEtBQUMsZUFBZSxJQUFDLElBQUksRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsYUFBYSxHQUFJLEdBQzVELENBQ1YsSUFDRyxFQUNOLGVBQUssU0FBUyxFQUFDLHdCQUF3QixhQUNwQyxXQUFXLElBQUksQ0FDZCxjQUFLLFNBQVMsRUFBQyxtREFBbUQsWUFDL0QsV0FBVyxHQUNSLENBQ1AsRUFDQSxvQkFBb0IsRUFBRSxJQUNuQixJQUNGLENBQ1AsQ0FBQztBQUNKLENBQUMsQ0FBQyJ9