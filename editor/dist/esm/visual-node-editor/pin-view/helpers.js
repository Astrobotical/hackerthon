import React, { useCallback, useRef, useState } from "react";
import { useDebuggerContext } from "../../flow-editor/DebuggerContext";
import { TRIGGER_PIN_ID, ERROR_PIN_ID } from "@flyde/core";
const INSIGHTS_TOOLTIP_INTERVAL = 500;
export const useHistoryHelpers = (instanceId, pinId, type) => {
    const historyTimer = useRef();
    const { onRequestHistory } = useDebuggerContext();
    const [history, setHistory] = useState();
    const refreshHistory = useCallback(() => {
        clearInterval(historyTimer.current);
        onRequestHistory(instanceId, pinId !== null && pinId !== void 0 ? pinId : "", type !== null && type !== void 0 ? type : "input").then((val) => {
            setHistory(val);
        });
        historyTimer.current = setInterval(() => {
            onRequestHistory(instanceId, pinId !== null && pinId !== void 0 ? pinId : "", type !== null && type !== void 0 ? type : "input").then((val) => {
                setHistory(val);
            });
        }, INSIGHTS_TOOLTIP_INTERVAL);
    }, [instanceId, onRequestHistory, pinId, type]);
    const resetHistory = React.useCallback(() => {
        clearInterval(historyTimer.current);
        setHistory(undefined);
    }, []);
    return { history, refreshHistory, resetHistory };
};
export const getInputName = (pinId) => {
    switch (pinId) {
        case TRIGGER_PIN_ID:
            return 'trigger';
        default:
            return pinId;
    }
};
export const getOutputName = (pinId) => {
    switch (pinId) {
        case ERROR_PIN_ID:
            return "error";
        default:
            return pinId;
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVscGVycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy92aXN1YWwtbm9kZS1lZGl0b3IvcGluLXZpZXcvaGVscGVycy50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxLQUFLLEVBQUUsRUFBZ0IsV0FBVyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxPQUFPLENBQUM7QUFDM0UsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFDdkUsT0FBTyxFQUFFLGNBQWMsRUFBRSxZQUFZLEVBQWtCLE1BQU0sYUFBYSxDQUFDO0FBSTNFLE1BQU0seUJBQXlCLEdBQUcsR0FBRyxDQUFDO0FBRXRDLE1BQU0sQ0FBQyxNQUFNLGlCQUFpQixHQUFHLENBQy9CLFVBQWtCLEVBQ2xCLEtBQWMsRUFDZCxJQUF5QixFQUN6QixFQUFFO0lBQ0YsTUFBTSxZQUFZLEdBQUcsTUFBTSxFQUFPLENBQUM7SUFFbkMsTUFBTSxFQUFFLGdCQUFnQixFQUFFLEdBQUcsa0JBQWtCLEVBQUUsQ0FBQztJQUVsRCxNQUFNLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxHQUFHLFFBQVEsRUFBa0IsQ0FBQztJQUV6RCxNQUFNLGNBQWMsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFO1FBQ3RDLGFBQWEsQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDcEMsZ0JBQWdCLENBQUMsVUFBVSxFQUFFLEtBQUssYUFBTCxLQUFLLGNBQUwsS0FBSyxHQUFJLEVBQUUsRUFBRSxJQUFJLGFBQUosSUFBSSxjQUFKLElBQUksR0FBSSxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRTtZQUN0RSxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDbEIsQ0FBQyxDQUFDLENBQUM7UUFDSCxZQUFZLENBQUMsT0FBTyxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUU7WUFDdEMsZ0JBQWdCLENBQUMsVUFBVSxFQUFFLEtBQUssYUFBTCxLQUFLLGNBQUwsS0FBSyxHQUFJLEVBQUUsRUFBRSxJQUFJLGFBQUosSUFBSSxjQUFKLElBQUksR0FBSSxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRTtnQkFDdEUsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ2xCLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxFQUFFLHlCQUF5QixDQUFDLENBQUM7SUFDaEMsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLGdCQUFnQixFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBRWhELE1BQU0sWUFBWSxHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFO1FBQzFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDcEMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ3hCLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUVQLE9BQU8sRUFBRSxPQUFPLEVBQUUsY0FBYyxFQUFFLFlBQVksRUFBRSxDQUFDO0FBQ25ELENBQUMsQ0FBQztBQUdGLE1BQU0sQ0FBQyxNQUFNLFlBQVksR0FBRyxDQUFDLEtBQWEsRUFBVSxFQUFFO0lBQ3BELFFBQVEsS0FBSyxFQUFFLENBQUM7UUFDZCxLQUFLLGNBQWM7WUFDakIsT0FBTyxTQUFTLENBQUM7UUFDbkI7WUFDRSxPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sYUFBYSxHQUFHLENBQUMsS0FBYSxFQUFFLEVBQUU7SUFDN0MsUUFBUSxLQUFLLEVBQUUsQ0FBQztRQUNkLEtBQUssWUFBWTtZQUNmLE9BQU8sT0FBTyxDQUFDO1FBQ2pCO1lBQ0UsT0FBTyxLQUFLLENBQUM7SUFDakIsQ0FBQztBQUNILENBQUMsQ0FBQyJ9